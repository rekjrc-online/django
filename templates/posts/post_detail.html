{% extends "base.html" %}

{% block content %}
<script src="/static/likes.js"></script><br>
<div class="card post" style="max-width: 800px; padding: 15px; background-color: #2e2e2e; border-radius: 8px;">
    <!-- Post Header -->
    <div style="margin-bottom: 10px;">
        <strong>@{{ post.profile_id.displayname }}</strong>
        <font size="-1">
            - {{ post.profile_id.get_profiletype_display }}
            - {{ post.insertdate|date:"m/d/y h:iA" }}
        </font>
    </div>

    <!-- Post Content -->
    <p style="margin-top: 8px;">{{ post.content }}</p>

    {% if post.image %}
        <img src="{{ post.image.url }}" alt="Post image" style="max-width: 100%; border-radius: 6px; margin-top: 5px;">
    {% endif %}

    {% if post.video_url %}
        <div style="margin-top: 10px;">
            <a href="{{ post.video_url }}" target="_blank" style="color: #1da1f2;">Watch Video</a>
        </div>
    {% endif %}

    <!-- Post Stats -->
    <div style="margin-top: 10px; font-size: 0.9em; color: gray;">
        {% include "posts/post_metrics.html" %}
    </div>

    <!-- Reply Button -->
    <div style="margin-top: 15px; text-align: right;">
        <a href="{% url 'posts:post_reply' post.id %}" style="background-color: #1da1f2; color: white; padding: 8px 14px; border-radius: 5px; text-decoration: none;">Reply</a>
    </div>
</div>

<!-- Replies Section -->
{% if replies %}
    <br>
    <div class="card" style="max-width: 800px; background-color: #3a3a3a; padding: 10px; border-radius: 8px;">
        <h4>Replies</h4>
        {% for reply in replies %}
            <div style="border-bottom: 1px solid #555; padding: 8px 0;">
                <strong>@{{ reply.profile_id.displayname }}</strong>
                <font size="-1">- {{ reply.insertdate|date:"m/d/y h:iA" }}</font><br>
                <p style="margin-top: 5px;">{{ reply.content }}</p>
                {% if reply.image %}
                    <img src="{{ reply.image.url }}" style="max-width: 100%; border-radius: 6px; margin-top: 5px;">
                {% endif %}
            </div>
        {% empty %}
            <p>No replies yet.</p>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
