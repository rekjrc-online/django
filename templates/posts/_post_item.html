<div class="post" onclick="window.location.href='/posts/{{ post.id }}/';" style="cursor: pointer; margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 10px;">
    <!-- Post Header -->
    <strong>
        <a href="/profiles/{{ post.profile_id.pk }}/">
            {{ post.profile_id.displayname }}
        </a>
    </strong>
    - {{ post.profile_id.get_profiletype_display }}
    - {{ post.insertdate|date:"m/d/y h:iA" }}

    <!-- Post Content -->
    <p>{{ post.content|linebreaksbr }}</p>

    <!-- Image -->
    {% if post.image %}
        <a target="_blank" href="{{ post.image.url }}">
            <img src="{{ post.image.url }}" alt="Post image" style="max-width: 200px; margin-top:5px; border-radius: 5px;">
        </a>
    {% endif %}

    <!-- Video / YouTube -->
    {% if post.youtube_id %}
        <div class="video-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;">
            <iframe src="https://www.youtube.com/embed/{{ post.youtube_id }}" frameborder="0" allowfullscreen
                    style="position: absolute; top:0; left:0; width:100%; height:100%;">
            </iframe>
        </div>
        <noscript><p><a href="https://www.youtube.com/watch?v={{ post.youtube_id }}" target="_blank">Watch on YouTube</a></p></noscript>
        <p style="font-size: small; text-align: center;">
            <a href="https://www.youtube.com/watch?v={{ post.youtube_id }}" target="_blank">Watch on YouTube</a>
        </p>
    {% elif post.video_url %}
        <p><a href="{{ post.video_url }}" target="_blank">Watch Video</a></p>
    {% endif %}

    <!-- Post Metrics -->
    <div class="metrics" data-post-id="{{ post.id }}" style="font-size:0.9em; color:gray; margin-top:5px;">
        {% if user.is_authenticated %}
            <a href="#" onclick="event.stopPropagation();" class="like-btn text-decoration-none" data-post-id="{{ post.id }}">
                {% if post.liked_by_user %}
                    <span class="heart">❤️</span>
                {% else %}
                    <span class="heart">🤍</span>
                {% endif %}
                <span class="like-count">{{ post.likes_count }}</span>
            </a> |
            <a href="/posts/{{ post.id }}/reply" onclick="event.stopPropagation();" class="text-decoration-none">
                💬 {{ post.replies.count }}
            </a>
        {% else %}
            <span class="heart">🤍</span>
            <span class="like-count">{{ post.likes_count }}</span>
            | 💬 {{ post.replies.count }}
        {% endif %}
    </div>
</div>
