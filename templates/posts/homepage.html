{% extends "base.html" %}

{% block content %}
  <br>
  <div id="feed">
    <div class="post">
      <h2>
        RekjRC Feed
        {% if request.user.is_authenticated %}
          <br><input type="button" value="New Post" onclick="self.location.href='/posts/create/'" style="width:10em;height:2em;font-size:large;">
        {% endif %}
      </h2>
    </div>
    {% for post in posts %}
      <div class="post">
        <strong><a href="/profiles/{{ post.profile_id.pk }}/view">{{ post.profile_id.displayname }}</a></strong> -
        {{ post.profile_id.get_profiletype_display }} -
        {{ post.insertdate|date:"m/d/y h:iA" }}
        <p>{{ post.content|linebreaksbr }}</p>

        {% if post.image %}
          <a target="_blank" href="{{ post.image.url }}">
            <img src="{{ post.image.url }}" alt="Post image" style="max-width:200px;">
          </a>
        {% endif %}

        {% if post.video_url %}
          <p><a href="{{ post.video_url }}" target="_blank">Watch Video</a></p>
        {% endif %}

        <div class="metrics">
          ‚ù§Ô∏è {{ post.likes_count }} | üí¨ {{ post.comments_count }} | üîÅ {{ post.reposts_count }}
        </div>
      </div>
    {% empty %}
      <p>No posts yet. Be the first to post!</p>
    {% endfor %}
  </div>

{% endblock %}
